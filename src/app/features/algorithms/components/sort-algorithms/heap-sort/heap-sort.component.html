<form novalidate [formGroup]="heapSortFG">
    <div class="d-flex mb-2">
        <div class="col-7">
            <h4>Heap Sort Algorithm</h4>
        </div>
        <div class="col-5 d-flex justify-content-end">
            <h4>Big O:&nbsp;<span class="text-success">O(n log n)</span></h4>
        </div>
    </div>

    <p>Heap sort is a comparison-based sorting technique based on Binary Heap data structure. It is similar to the
        selection sort where we first find the minimum element and place the minimum element at the beginning. Repeat
        the same process for the remaining elements.</p>

    <p><b>To solve the problem follow the below idea:</b></p>

    <p>First convert the array into heap data structure using heapify, then one by one delete the root node of the
        Max-heap and replace it with the last node in the heap and then heapify the root of the heap. Repeat this
        process until size of heap is greater than 1.</p>

    <ul>
        <li>Build a heap from the given input array.</li>
        <li>Repeat the following steps until the heap contains only one element:
            <ul>
                <li>
                    Swap the root element of the heap (which is the largest element) with the last element of the heap.
                </li>
                <li>
                    Remove the last element of the heap (which is now in the correct position).
                </li>
                <li>
                    Heapify the remaining elements of the heap.
                </li>
            </ul>
        </li>
        <li>
            The sorted array is obtained by reversing the order of the elements in the input array.
        </li>
    </ul>

    <p class="m-0">To understand heap sort more clearly, let's take an unsorted array and try to sort it using heap
        sort.</p>
    <p>Consider the array: arr[] = &#123;4, 10, 3, 5, 1&#125;.</p>

    <p><b>Build Complete Binary Tree:</b> Build a complete binary tree from the array.</p>

    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-1.png" />

    <p>Transform into max heap: After that, the task is to construct a tree from that unsorted array and try to convert
        it into max heap.</p>

    <ul>
        <li>To transform a heap into a max-heap, the parent node should always be greater than or equal to the child
            nodes</li>
        <ul>
            <li>Here, in this example, as the parent node 4 is smaller than the child node 10, thus, swap them to build
                a max-heap.</li>
        </ul>
        Now, 4 as a parent is smaller than the child 5, thus swap both of these again and the resulted heap and array
        should be like this:
    </ul>

    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-2.png" />

    <p><b>Perform heap sort:</b> Remove the maximum element in each step (i.e., move it to the end position and remove
        that)
        and then consider the remaining elements and transform it into a max heap.</p>

    <ul>
        <li>Delete the root element <b>(10)</b> from the max heap. In order to delete this node, try to swap it with the
            last
            node, i.e. <b>(1)</b>. After removing the root element, again heapify it to convert it into max heap.</li>
    </ul>

    <ul>
        <li>Resulted heap and array should look like this:</li>
    </ul>
    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-3.png" />

    <ul>
        <li>Repeat the above steps and it will look like the following:</li>
    </ul>

    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-4.png" />

    <ul>
        <li>Now remove the root (i.e. 3) again and perform heapify.</li>
    </ul>

    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-5.png" />

    <ul>
        <li>
            Now when the root is removed once again it is sorted. and the sorted array will be like arr[] = &#123;1, 3,
            4,
            5, 10&#125;.
        </li>
    </ul>

    <img class="heap-image mt-2 mb-4" src="assets/images/algorithms/sort-algorithms/heap-sort/heap-sort-6.png" />

    <h4 class="mt-4 mb-2">Code</h4>

    <pre class="code-background">
        <code [innerHTML]="highlightedCode"></code>
    </pre>

    <h4 class="mt-4 mb-2">Practice Implementation</h4>

    <div class="row">
        <div class="d-flex">
            <div class="col-3 pt-2">Heap sort on Id: </div>
            <div class="col-9">
                <button class="button me-2" type="button" (click)="heapSort()">Heap Sort</button>
                <button class="button" type="button" (click)="reset()">Randomize</button>
            </div>
        </div>
    </div>

    <table class="table table-striped mt-4">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Country</th>
                <th scope="col">Area</th>
                <th scope="col">Population</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let country of countries">
                <th scope="row">{{ country.id }}</th>
                <td><ngb-highlight [result]="country.name"></ngb-highlight></td>
                <td><ngb-highlight [result]="country.capital"></ngb-highlight></td>
                <td><ngb-highlight [result]="country.population | number"></ngb-highlight></td>
            </tr>
        </tbody>
    </table>
</form>